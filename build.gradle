/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.5/userguide/tutorial_java_projects.html
 */



def javaProjects() {
    subprojects.findAll()
}


allprojects {
    group = 'com.imanage.session-test'

    repositories{
        mavenCentral ()
        maven {
            url 'http://archiva.imanage.com/repository/internal/'
        }
    }

}

ext {
    groovy_version = '2.4.10'
    groovy_http_builder_version = '0.7.2'
    gpars_version = '1.2.1'
    docker_client_version = '2017-08-28T08-23-24'
    slf4j_version = '1.7.25'
    logback_version = '1.2.3'
    hdr_histogram_version = '2.1.9'
}


configure (javaProjects()) {
    // Apply the maven-publish plugin to add support for publishing to archiva
    apply plugin: 'java'
    apply plugin: 'maven-publish'
    // testing plugins
    //apply plugin: 'pmd'
    //apply plugin: 'findbugs'
    // Apply plugin to check code style
    //apply plugin: 'checkstyle'
    // Apply plugin to generate code coverage reports
    //apply plugin: 'jacoco'

    sourceCompatibility = JavaVersion.VERSION_1_8
    targetCompatibility = JavaVersion.VERSION_1_8

    task sourceJar (type: Jar) {
        from sourceSets.main.allSource
    }

    publishing {
        publications {
            mavenJava(MavenPublication) {
                from components.java

                artifact sourceJar {
                    classifier "sources"
                }
            }
        }

        repositories {
            maven {
                credentials {
                    username "${System.env.archivaUser?:''}"
                    password "${System.env.archivaPassword?:''}"

                }
                url 'http://archiva.imanage.com/repository/internal/'
            }
        }
    }


}

task showClasspath {
    doLast {
        buildscript.configurations.classpath.each { println it.name }
    }
}



task wrapper (type: Wrapper) {
     gradleVersion = '3.5.1'
}
